<!-- <div class="rating-bar">
  <div class="stars-container">
    <pm-star></pm-star>
  </div>
  <div
    class="filling-bar"
    [style.width.%]="(product.reviewStats.star / product.ratingsQuantity) * 100"
  ></div>
</div> -->

<!-- <div class="rating-bars">
  <div
    *ngFor="let bar of bars"
    class="rating-bar"
    [style.width.%]="product.ratingsQuantity?(bar / product.ratingsQuantity) * 100: null"
  >
    {{ bar }}
  </div>
</div> -->

<!-- <div class="container" >
  <div class="row">
    <div class="col-8">
      <div
        class="d-flex"
        *ngFor="let bar of [1, 2, 3, 4, 5]; let i = index; of: getDescendingNumbers(); let review of reviewArray"
      >
        <div>{{ review[1] }}</div>
        <div class="bar" [style.width.%]="(review[1] / product.ratingsQuantity) * 100"></div>
        <div class="col-1 d-flex">
          Dynamically generate stars based on the rating
          <ng-container *ngFor="let filledStar of getFilledStars(review[1])">
            <svg width="15" height="15" class="star-icon" xmlns="http://www.w3.org/2000/svg" fill="gold">
              <use xlink:href="../assets/icons/sprite.svg#icon-star"></use>
            </svg>
          </ng-container>
        </div>
        <div class="col-1 d-flex" style="line-height: 1">{{ i + 1 }}</div>
      </div>
    </div>
  </div>
</div> -->

<div class="pop-containter" *ngIf="visible">
  <div class="pops container">
    <div class="review-top">
      <div class="mb-1 review-top1" style="">
        {{ product.ratingsAverage }}<span
          style=""
          >/5</span
        >
      </div>
      <!-- <pm-star class="card-text mb-2" [rating]="product.ratingsAverage"></pm-star> -->
      <div class="">{{ product.ratingsQuantity }} verified ratings</div>
      <div class="close" (click)="toggleContent()">
        <a>&times;</a>
      </div>
    </div>
    <div class="review-body">
      <div class="col review-cont">
        <div class="d-flex" *ngFor="let review of reviewArray; let i = index">
          <div class="col-1 d-flex" style="line-height: 1; ">
            {{ i + 1 }}
          </div>
          <div class="col-1 d-flex" style="">
            <p>
              <!-- Adjust the SVG size and styling as needed -->
              <svg
                width="15"
                height="15"
                class="star-icon d-flex"
                xmlns="http://www.w3.org/2000/svg"
                fill="gold"
              >
                <use xlink:href="../assets/icons/sprite.svg#icon-star"></use>
              </svg>
            </p>
          </div>
          <div class="bar">
            <div class="inner-bar" [style.width]="(review[1] / product.ratingsQuantity) * 100 + '%'"></div>
          </div>
          <div
            class="d-flex ms-"
            style="line-height: 1; margin-left: 10px; flex: 0 0 6%"
          >
            {{ review[1] }}
          </div>
        </div>
      </div>
      <hr />
      <div class="review-cont1 mt-2 p-2" *ngFor="let review of product.reviews">
        <div class="d-flex justify-content-between" style="font-weight: 700">
          <div class="">{{ review.user.name }}</div>
          <div class="">{{ review.createdAt | date }}</div>
        </div>
        <div class=""><pm-star [rating]="review.rating"></pm-star></div>
        <div class="col-12">{{ review.comment }}</div>
      </div>
    </div>
  </div>
</div>
